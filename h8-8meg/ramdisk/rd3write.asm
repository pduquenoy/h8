
	TITLE	'RD3WRITE - WRITE TEST BYTES TO RD3'
	EJECT
***	RD3WRITE - WRITE TEST BYTES TO RD3
*
*       SMBAKER


	XTEXT	HOSDEF
	XTEXT	HOSEQU
	XTEXT   PGREG
**	ORG	USERFWA

**ENTRY	JMP	MAIN
**
	ORG	04000H		

ENTRY	LXI	HJ,INTRO
	SCALL	.PRINT
	CALL	PGINIT

	MVI	A,00H
	OUT	WR00K,A		Select Page 0

	MVI	H,00H
	MVI	L,00H

	MVI	D,00H		Starting pattern

	MVI	B,0		Write 256 rows

ROWLOOP	MVI	C,16
COLLOOP	DI
	MVI	A,083H
	OUT	WR00KH,A
	MOV	M,D		Write D into (HL)
	MVI	A,000H
	OUT	WR00KH,A
	EI

	INR	D		Increment pattern
	INX	H		Increment dest addr

	DCR	C
	JNZ	COLLOOP

	DCR	B
	JNZ	ROWLOOP

	XRA	A
	SCALL	.EXIT

PHEXA	PUSH	PSW
	RLC
	RLC
	RLC
	RLC
	CALL	PHEXA0
	POP	PSW
PHEXA0	ANI	00FH
	ADI	090H
	DAA
	ACI	040H
	DAA
	SCALL    .SCOUT
	RET

PHEXHL	PUSH	PSW
	MOV	A,H
	CALL	PHEXA
	MOV	A,L
	CALL	PHEXA
	POP	PSW
	RET

PHEXDE	PUSH	PSW
	MOV	A,D
	CALL	PHEXA
	MOV	A,E
	CALL	PHEXA
	POP	PSW
	RET

PHEXBC	PUSH	PSW
	MOV	A,B
	CALL	PHEXA
	MOV	A,C
	CALL	PHEXA
	POP	PSW
	RET

	XTEXT	PGMAP

INTRO	DB	12Q,'RAMDISK WRITE TEST',212Q

	LON	G
	END	ENTRY
